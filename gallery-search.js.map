{"version":3,"file":"gallery-search.js","sources":["../src/gallery.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport axios from 'axios';\n\nconst btnSearch = document.querySelector('.btn-search');\nconst searchImagesInput = document.querySelector('.search-images-input');\nconst gallery = document.querySelector('.gallery');\nconst searchImages = document.querySelector('.search-images');\nconst btnLoadMore = document.querySelector('.btn-load-more');\nconst btnLoadMoreDiv = document.getElementById('btn-load-more-div');\n\nbtnSearch.addEventListener('click', event => {\n  event.preventDefault();\n  const inputImagesValue = searchImagesInput.value;\n  console.log(searchImagesInput.value);\n\n  searchImages.insertAdjacentHTML(\n    'afterend',\n    `<div class=\"loader-div\" id=\"loader-div\"><span class=\"loader\"></span></div>`\n  );\n\n  const loader = document.getElementById('loader-div');\n\n  let pageMore = 1;\n\n  const searchParams = new URLSearchParams({\n    key: '46374353-2f98dff3c8dab99fd2b2fa1f1',\n    q: `'${inputImagesValue}'`,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page: 40,\n    page: `${pageMore}`,\n  });\n\n  console.log(searchParams.toString());\n\n  const url = `https://pixabay.com/api/?${searchParams}`;\n\n  const fetchImages = async () => {\n    const response = await axios.get(url);\n    return response.data;\n  };\n\n  const doStuff = async () => {\n    try {\n      const imagesApi = await fetchImages();\n      console.log(imagesApi);\n      if (imagesApi.hits.length === 0) {\n        throw new Error('No results found');\n      }\n\n      loader.style.display = 'none';\n\n      const galleryImages = imagesApi.hits\n        .map(\n          image => `<li class=\"gallery-item\">\n  <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n    <img\n      class=\"gallery-image\"\n      src=\"${image.webformatURL}\"\n      data-source=\"${image.largeImageURL}\"\n      alt=\"${image.tags}\"\n    />\n  </a>\n  <div class=\"characteristics-photo\">\n  <p class=\"characteristic\">Likes:<span class=\"characteristic-span\">${image.likes}</span></p>\n  <p class=\"characteristic\">Views:<span class=\"characteristic-span\">${image.views}</span></p>\n  <p class=\"characteristic\">Comments:<span class=\"characteristic-span\">${image.comments}</span></p>\n  <p class=\"characteristic\">Downloads:<span class=\"characteristic-span\">${image.downloads}</span></p>\n  </div>\n</li>`\n        )\n        .join('');\n\n      gallery.innerHTML = '';\n\n      gallery.insertAdjacentHTML('beforeend', galleryImages);\n\n      btnLoadMoreDiv.style.display = 'flex';\n\n      new SimpleLightbox('.gallery a', {\n        captionsData: 'alt',\n        captionDelay: 250,\n      });\n    } catch (error) {\n      console.error(error);\n      loader.style.display = 'none';\n      gallery.innerHTML = '';\n      iziToast.error({\n        title: '',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topCenter',\n      });\n    }\n  };\n  doStuff();\n\n  btnLoadMore.addEventListener('click', event => {\n    event.preventDefault();\n    pageMore = pageMore + 1;\n\n    const searchParams = new URLSearchParams({\n      key: '46374353-2f98dff3c8dab99fd2b2fa1f1',\n      q: `'${inputImagesValue}'`,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      per_page: 40,\n      page: `${pageMore}`,\n    });\n\n    const url = `https://pixabay.com/api/?${searchParams}`;\n\n    const fetchImages = async () => {\n      const response = await axios.get(url);\n      return response.data;\n    };\n\n    const doStuffMore = async () => {\n      try {\n        const imagesApi = await fetchImages();\n        console.log(imagesApi);\n        if (imagesApi.hits.length === 0) {\n          throw new Error('No results found');\n        }\n\n        loader.style.display = 'none';\n\n        const galleryImages = imagesApi.hits\n          .map(\n            image => `<li class=\"gallery-item\">\n  <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n    <img\n      class=\"gallery-image\"\n      src=\"${image.webformatURL}\"\n      data-source=\"${image.largeImageURL}\"\n      alt=\"${image.tags}\"\n    />\n  </a>\n  <div class=\"characteristics-photo\">\n  <p class=\"characteristic\">Likes:<span class=\"characteristic-span\">${image.likes}</span></p>\n  <p class=\"characteristic\">Views:<span class=\"characteristic-span\">${image.views}</span></p>\n  <p class=\"characteristic\">Comments:<span class=\"characteristic-span\">${image.comments}</span></p>\n  <p class=\"characteristic\">Downloads:<span class=\"characteristic-span\">${image.downloads}</span></p>\n  </div>\n</li>`\n          )\n          .join('');\n\n        gallery.insertAdjacentHTML('beforeend', galleryImages);\n\n        btnLoadMoreDiv.style.display = 'flex';\n\n        new SimpleLightbox('.gallery a', {\n          captionsData: 'alt',\n          captionDelay: 250,\n        });\n      } catch (error) {\n        console.error(error);\n        loader.style.display = 'none';\n        gallery.innerHTML = '';\n        iziToast.error({\n          title: '',\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n          position: 'topCenter',\n        });\n      }\n    };\n    doStuffMore();\n    btnSearch.addEventListener('click', () => {\n      pageMore = 1;\n      gallery.innerHTML = '';\n    });\n  });\n  searchImagesInput.textContent = '';\n});\n"],"names":["btnSearch","searchImagesInput","gallery","searchImages","btnLoadMore","btnLoadMoreDiv","event","inputImagesValue","loader","pageMore","searchParams","url","fetchImages","axios","imagesApi","galleryImages","image","SimpleLightbox","error","iziToast"],"mappings":"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"}