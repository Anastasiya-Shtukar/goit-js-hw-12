{"version":3,"file":"index.js","sources":["../src/gallery.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport axios from 'axios';\n\nconst btnSearch = document.querySelector('.btn-search');\nconst searchImagesInput = document.querySelector('.search-images-input');\nconst gallery = document.querySelector('.gallery');\nconst searchImages = document.querySelector('.search-images');\nconst btnLoadMore = document.querySelector('.btn-load-more');\nconst btnLoadMoreDiv = document.getElementById('btn-load-more-div');\nlet loader;\n\nbtnSearch.addEventListener('click', event => {\n  event.preventDefault();\n  const inputImagesValue = searchImagesInput.value;\n  console.log(searchImagesInput.value);\n\n  searchImages.insertAdjacentHTML(\n    'afterend',\n    `<div class=\"loader-div\" id=\"loader-div\"><span class=\"loader\"></span></div>`\n  );\n\n  loader = document.getElementById('loader-div');\n\n  const searchParams = new URLSearchParams({\n    key: '46374353-2f98dff3c8dab99fd2b2fa1f1',\n    q: `'${inputImagesValue}'`,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page: 40,\n    page: 1,\n  });\n\n  console.log(searchParams.toString());\n\n  const url = `https://pixabay.com/api/?${searchParams}`;\n\n  const fetchImages = async () => {\n    const response = await axios.get(url);\n    return response.data;\n  };\n\n  const doStuff = async () => {\n    try {\n      const imagesApi = await fetchImages();\n      console.log(imagesApi);\n      if (imagesApi.hits.length === 0) {\n        throw new Error('No results found');\n      }\n\n      loader.style.display = 'none';\n\n      const galleryImages = imagesApi.hits\n        .map(\n          image => `<li class=\"gallery-item\">\n  <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n    <img\n      class=\"gallery-image\"\n      src=\"${image.webformatURL}\"\n      data-source=\"${image.largeImageURL}\"\n      alt=\"${image.tags}\"\n    />\n  </a>\n  <div class=\"characteristics-photo\">\n  <p class=\"characteristic\">Likes:<span class=\"characteristic-span\">${image.likes}</span></p>\n  <p class=\"characteristic\">Views:<span class=\"characteristic-span\">${image.views}</span></p>\n  <p class=\"characteristic\">Comments:<span class=\"characteristic-span\">${image.comments}</span></p>\n  <p class=\"characteristic\">Downloads:<span class=\"characteristic-span\">${image.downloads}</span></p>\n  </div>\n</li>`\n        )\n        .join('');\n\n      gallery.innerHTML = '';\n\n      gallery.insertAdjacentHTML('beforeend', galleryImages);\n\n      btnLoadMoreDiv.style.display = 'flex';\n\n      new SimpleLightbox('.gallery a', {\n        captionsData: 'alt',\n        captionDelay: 250,\n      });\n    } catch (error) {\n      console.error(error);\n      loader.style.display = 'none';\n      gallery.innerHTML = '';\n      iziToast.error({\n        title: '',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topCenter',\n      });\n    }\n  };\n  doStuff();\n});\n\nlet pageMore = 1;\n\nbtnLoadMore.addEventListener('click', event => {\n  event.preventDefault();\n\n  gallery.insertAdjacentHTML(\n    'afterend',\n    `<div class=\"loader-div\" id=\"loader-div-more\"><span class=\"loader\"></span></div>`\n  );\n  const loaderMore = document.getElementById('loader-div-more');\n\n  const inputImagesValue = searchImagesInput.value;\n\n  pageMore = pageMore + 1;\n\n  const searchParams = new URLSearchParams({\n    key: '46374353-2f98dff3c8dab99fd2b2fa1f1',\n    q: `'${inputImagesValue}'`,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page: 40,\n    page: `${pageMore}`,\n  });\n\n  const url = `https://pixabay.com/api/?${searchParams}`;\n\n  const fetchImages = async () => {\n    const response = await axios.get(url);\n    return response.data;\n  };\n\n  const doStuffMore = async () => {\n    try {\n      const imagesApi = await fetchImages();\n      console.log(imagesApi);\n      if (imagesApi.hits.length === 0) {\n        throw new Error('No results found');\n      }\n\n      if (pageMore * 40 >= imagesApi.totalHits) {\n        btnLoadMoreDiv.style.display = 'none';\n        iziToast.info({\n          title: '',\n          message: \"We're sorry, but you've reached the end of search results.\",\n          position: 'topCenter',\n        });\n      }\n\n      const galleryImages = imagesApi.hits\n        .map(\n          image => `<li class=\"gallery-item\">\n  <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n    <img\n      class=\"gallery-image\"\n      src=\"${image.webformatURL}\"\n      data-source=\"${image.largeImageURL}\"\n      alt=\"${image.tags}\"\n    />\n  </a>\n  <div class=\"characteristics-photo\">\n  <p class=\"characteristic\">Likes:<span class=\"characteristic-span\">${image.likes}</span></p>\n  <p class=\"characteristic\">Views:<span class=\"characteristic-span\">${image.views}</span></p>\n  <p class=\"characteristic\">Comments:<span class=\"characteristic-span\">${image.comments}</span></p>\n  <p class=\"characteristic\">Downloads:<span class=\"characteristic-span\">${image.downloads}</span></p>\n  </div>\n</li>`\n        )\n        .join('');\n\n      gallery.insertAdjacentHTML('beforeend', galleryImages);\n\n      const galleryItem = document\n        .querySelector('.gallery-item')\n        .getBoundingClientRect();\n      const { height: cardHeight } = galleryItem;\n      window.scrollBy({\n        top: cardHeight * 2,\n        behavior: 'smooth',\n      });\n\n      loaderMore.style.display = 'none';\n\n      btnLoadMoreDiv.style.display = 'flex';\n\n      new SimpleLightbox('.gallery a', {\n        captionsData: 'alt',\n        captionDelay: 250,\n      });\n    } catch (error) {\n      console.error(error);\n\n      btnLoadMoreDiv.style.display = 'none';\n      iziToast.info({\n        title: '',\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topCenter',\n      });\n    }\n  };\n  doStuffMore();\n});\n"],"names":["btnSearch","searchImagesInput","gallery","searchImages","btnLoadMore","btnLoadMoreDiv","loader","event","inputImagesValue","searchParams","url","fetchImages","axios","imagesApi","galleryImages","image","SimpleLightbox","error","iziToast","pageMore","loaderMore","galleryItem","cardHeight"],"mappings":"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"}